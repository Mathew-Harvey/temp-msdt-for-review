<!DOCTYPE html>
<html lang="en" data-theme="orange">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hull Fouling Calculator - MarineStream™</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="./assets/favicon.ico">
    
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
    
    <!-- MarineStream Styling -->
    <link rel="stylesheet" href="./style.css">
    
    <style>
        /* === CORE DESIGN SYSTEM === */
        :root {
            /* Color Palette - Ocean-inspired */
            --primary: #1E4D78;
            --primary-light: #3A6EA5;
            --primary-dark: #0D3356;
            --secondary: #E87722;
            --secondary-light: #FF9A47;
            --accent: #108565;
            --accent-light: #1DB286;
            --accent-dark: #096F53;
            --neutral-100: #FFFFFF;
            --neutral-200: #F7FAFC;
            --neutral-300: #EDF2F7;
            --neutral-400: #E2E8F0;
            --neutral-500: #CBD5E0;
            --neutral-600: #718096;
            --neutral-700: #4A5568;
            --neutral-800: #2D3748;
            --neutral-900: #1A202C;
            
            /* Typography */
            --font-sans: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            --font-serif: 'Georgia', serif;
            --font-mono: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
            
            /* Spacing */
            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-5: 1.5rem;
            --space-6: 2rem;
            --space-8: 3rem;
            --space-10: 4rem;
            --space-12: 6rem;
            
            /* Border Radius */
            --radius-sm: 0.25rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            
            /* Shadows */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);

            /* Animation */
            --transition-fast: 150ms;
            --transition-normal: 250ms;
            --transition-slow: 350ms;
            
            /* Container Widths */
            --container-sm: 640px;
            --container-md: 768px;
            --container-lg: 1024px;
            --container-xl: 1280px;
        }

        /* === RESET & BASE STYLES === */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-sans);
            background-color: var(--neutral-200);
            color: var(--neutral-800);
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: var(--space-4);
            color: var(--primary-dark);
        }

        h1 { font-size: 2.5rem; }
        h2 { font-size: 2rem; }
        h3 { font-size: 1.5rem; }
        h4 { font-size: 1.25rem; }
        h5 { font-size: 1.125rem; }
        h6 { font-size: 1rem; }

        p, ul, ol {
            margin-bottom: var(--space-4);
        }

        a {
            color: var(--primary);
            text-decoration: none;
            transition: all var(--transition-fast);
        }

        a:hover {
            color: var(--primary-light);
        }

        img {
            max-width: 100%;
            height: auto;
        }

        /* === LAYOUT === */
        .container {
            width: 100%;
            max-width: var(--container-xl);
            margin: 0 auto;
            padding: var(--space-4);
        }

        .page-wrapper {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .main-content {
            flex: 1;
            padding: var(--space-5) 0;
        }

        /* === COMPONENTS === */
        /* Hero Section */
        .hero {
            position: relative;
            background: linear-gradient(to right, var(--primary-dark), var(--primary));
            color: white;
            padding: var(--space-10) 0;
            margin-bottom: var(--space-8);
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff10" fill-opacity="0.1" d="M0,128L48,149.3C96,171,192,213,288,224C384,235,480,213,576,176C672,139,768,85,864,80C960,75,1056,117,1152,128C1248,139,1344,117,1392,106.7L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>');
            background-position: center bottom;
            background-repeat: no-repeat;
            background-size: cover;
            opacity: 0.3;
        }

        .hero-content {
            position: relative;
            z-index: 1;
            max-width: var(--container-lg);
            margin: 0 auto;
            text-align: center;
            padding: 0 var(--space-4);
        }

        .hero h1 {
            font-size: clamp(2rem, 5vw, 3.5rem);
            margin-bottom: var(--space-5);
            color: white;
            line-height: 1.1;
        }

        .hero p {
            font-size: clamp(1rem, 2vw, 1.25rem);
            max-width: 800px;
            margin: 0 auto var(--space-6);
            color: var(--neutral-300);
        }

        .hero-badge {
            display: inline-block;
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-xl);
            margin-bottom: var(--space-4);
            color: var(--neutral-200);
            font-weight: 500;
        }

        .hero-slideshow {
            position: relative;
            width: 100%;
            max-width: 800px;
            height: 50vh;
            max-height: 450px;
            min-height: 250px;
            margin: var(--space-8) auto 0 auto;
        }
        .hero-slideshow .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.7s cubic-bezier(.4,0,.2,1);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .hero-slideshow .slide.active {
            opacity: 1;
            z-index: 2;
        }
        .hero-slideshow img {
            width: auto;
            height: auto;
            max-width: 100%;
            max-height: 100%;
            border-radius: 18px;
            box-shadow: 0 6px 32px 0 rgba(30,77,120,0.18);
            object-fit: contain;
            background: rgba(255,255,255,0.08);
        }
        .slideshow-dots {
            position: absolute;
            bottom: 12px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 3;
        }
        .slideshow-dots .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            border: 2px solid #1E4D78;
            cursor: pointer;
            transition: background 0.3s;
        }
        .slideshow-dots .dot.active {
            background: #E87722;
            border-color: #E87722;
        }
        @media (max-width: 900px) {
            .hero-slideshow {
                max-width: 95%;
                width: 95%;
                height: 40vh;
                max-height: 350px;
                min-height: 200px;
                margin-top: var(--space-6);
            }
        }

        /* Close button */
        .close-calculator {
            position: absolute;
            top: var(--space-4);
            right: var(--space-4);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all var(--transition-fast);
            z-index: 10;
        }

        .close-calculator:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        /* Currency Selector */
        .currency-selector-container {
            display: flex;
            justify-content: center;
            padding: var(--space-4);
            margin-top: -var(--space-6);
            position: relative;
            z-index: 10;
        }

        .currency-selector {
            display: inline-flex;
            align-items: center;
            background-color: var(--neutral-100);
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
        }

        .currency-selector label {
            margin-right: var(--space-3);
            margin-bottom: 0;
            font-weight: 600;
            color: var(--primary);
        }

        .currency-selector select {
            padding: var(--space-1) var(--space-3);
            border-radius: var(--radius-md);
            border: 1px solid var(--neutral-400);
            background-color: var(--neutral-100);
            color: var(--primary-dark);
            font-weight: 500;
        }

        .currency-selector select:focus {
            outline: none;
            border-color: var(--primary-light);
            box-shadow: 0 0 0 2px rgba(58, 110, 165, 0.2);
        }

        /* Cards & Panels */
        .card {
            background-color: var(--neutral-100);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            transition: transform var(--transition-normal), box-shadow var(--transition-normal);
            margin-bottom: var(--space-6);
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .card-header {
            padding: var(--space-5);
            border-bottom: 1px solid var(--neutral-300);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-header-title {
            margin: 0;
            font-size: 1.25rem;
            color: var(--primary);
        }

        .card-header-icon {
            color: var(--primary-light);
            font-size: 1.5rem;
        }

        .card-body {
            padding: var(--space-5);
        }

        /* Calculator Grid */
        .calculator-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--space-6);
            margin-bottom: var(--space-8);
        }

        @media (min-width: 992px) {
            .calculator-grid {
                grid-template-columns: 1fr 1.6fr;
            }
        }

        /* Form Elements */
        .form-group {
            margin-bottom: var(--space-5);
        }

        label {
            display: block;
            margin-bottom: var(--space-2);
            font-weight: 600;
            color: var(--neutral-700);
        }

        .input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }

        .input-icon {
            position: absolute;
            left: var(--space-3);
            color: var(--neutral-600);
        }

        input[type="number"],
        select {
            width: 100%;
            padding: var(--space-3) var(--space-5);
            font-size: 1rem;
            border: 2px solid var(--neutral-400);
            border-radius: var(--radius-md);
            background-color: var(--neutral-100);
            color: var(--neutral-800);
            transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
        }

        input[type="number"]:focus,
        select:focus {
            outline: none;
            border-color: var(--primary-light);
            box-shadow: 0 0 0 3px rgba(58, 110, 165, 0.2);
        }

        select {
            appearance: none;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%23718096" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>');
            background-repeat: no-repeat;
            background-position: right var(--space-3) center;
            background-size: 1em;
        }

        .input-with-icon {
            padding-left: var(--space-8);
        }

        .help-text {
            display: block;
            margin-top: var(--space-2);
            font-size: 0.875rem;
            color: var(--neutral-600);
        }

        /* Custom Vessel Section */
        .custom-vessel-section {
            background: var(--neutral-200);
            padding: var(--space-4);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-4);
        }
        
        .custom-vessel-section h4 {
            color: var(--primary);
            margin-bottom: var(--space-4);
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }
        
        #customVesselParams {
            margin-top: var(--space-4);
            padding-top: var(--space-4);
            border-top: 1px solid var(--neutral-300);
        }
        
        .form-group input[readonly] {
            cursor: not-allowed;
            opacity: 0.7;
            background-color: var(--neutral-200);
        }

        /* Slider */
        .slider-container {
            margin-bottom: var(--space-5);
        }

        .slider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-3);
        }

        .slider-value {
            font-weight: 700;
            padding: var(--space-2) var(--space-3);
            border-radius: var(--radius-md);
            background-color: var(--primary);
            color: white;
        }

        .range-slider {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 6px;
            background: var(--neutral-300);
            border-radius: var(--radius-xl);
            outline: none;
            margin: var(--space-4) 0;
        }

        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
            transition: background var(--transition-fast), transform var(--transition-fast);
            box-shadow: var(--shadow-md);
        }

        .range-slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
            transition: background var(--transition-fast), transform var(--transition-fast);
            box-shadow: var(--shadow-md);
            border: none;
        }

        .range-slider::-webkit-slider-thumb:hover,
        .range-slider::-moz-range-thumb:hover {
            background: var(--primary-light);
            transform: scale(1.1);
        }

        .range-ticks {
            display: flex;
            justify-content: space-between;
            margin-top: var(--space-2);
        }

        .range-tick {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 20px;
            cursor: pointer;
        }

        .tick-dot {
            width: 8px;
            height: 8px;
            background-color: var(--neutral-500);
            border-radius: 50%;
            margin-bottom: var(--space-1);
            transition: background-color var(--transition-fast), transform var(--transition-fast);
        }

        .tick-label {
            font-size: 0.75rem;
            color: var(--neutral-600);
        }

        .fouling-rating-table {
            width: 100%;
            margin-top: var(--space-4);
            border-spacing: 0;
            border-radius: var(--radius-md);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }

        .fouling-rating-table th {
            background-color: var(--primary);
            color: white;
            text-align: left;
            padding: var(--space-3);
            font-size: 0.9rem;
        }

        .fouling-rating-table td {
            padding: var(--space-3);
            border-top: 1px solid var(--neutral-300);
            background-color: var(--neutral-100);
            font-size: 0.9rem;
        }

        .fouling-rating-table tr:nth-child(even) td {
            background-color: var(--neutral-200);
        }

        .fouling-rating-table tr:hover td {
            background-color: var(--neutral-300);
        }

        /* Results Section */
        .results-section {
            background-color: var(--neutral-200);
            border-radius: var(--radius-lg);
            padding: var(--space-5);
            margin-top: var(--space-5);
            border-left: 4px solid var(--primary);
        }

        .results-section h3 {
            color: var(--primary);
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .results-section h3 i {
            color: var(--secondary);
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: var(--space-3);
            margin-bottom: var(--space-2);
            background-color: white;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            transition: transform var(--transition-fast);
        }

        .result-item:hover {
            transform: translateX(5px);
        }

        .result-label {
            color: var(--neutral-700);
        }

        .result-value {
            font-weight: 700;
            color: var(--primary-dark);
        }

        .result-group {
            margin-bottom: var(--space-4);
        }

        .result-group-header {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            margin-bottom: var(--space-3);
            padding-bottom: var(--space-2);
            border-bottom: 1px solid var(--neutral-300);
        }

        .result-group-header h4 {
            margin: 0;
            color: var(--primary);
        }

        .validation-badge {
            display: inline-flex;
            align-items: center;
            background-color: var(--accent-light);
            color: white;
            padding: var(--space-2) var(--space-3);
            border-radius: var(--radius-xl);
            font-size: 0.875rem;
            font-weight: 500;
            margin-top: var(--space-4);
            gap: var(--space-2);
            max-width: fit-content;
        }

        /* Chart Container */
        .chart-container {
            width: 100%;
            height: 0;
            padding-bottom: 65%;
            position: relative;
            margin-bottom: var(--space-5);
        }

        .chart-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }

        /* Research Section */
        .research-section {
            margin-top: var(--space-10);
            padding-top: var(--space-8);
            border-top: 1px solid var(--neutral-400);
        }

        .research-header {
            text-align: center;
            max-width: 800px;
            margin: 0 auto var(--space-8);
        }

        .research-highlight {
            background-color: var(--primary-light);
            color: white;
            border-radius: var(--radius-lg);
            padding: var(--space-5);
            margin-bottom: var(--space-6);
            position: relative;
            overflow: hidden;
        }

        .research-highlight h3 {
            color: white;
            margin-bottom: var(--space-4);
        }

        .research-highlight p,
        .research-highlight ul li {
            margin-bottom: var(--space-3);
            color: rgba(255, 255, 255, 0.9);
        }

        .research-highlight ul {
            padding-left: var(--space-5);
            list-style: disc;
        }

        .information-note {
            background-color: rgba(16, 133, 101, 0.1);
            border-left: 4px solid var(--accent);
            padding: var(--space-4);
            border-radius: var(--radius-md);
            margin: var(--space-4) 0;
        }

        .information-note h4 {
            color: var(--accent-dark);
            margin-bottom: var(--space-2);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .information-note h4 i {
            color: var(--accent);
        }

        /* Source Papers Section */
        .source-papers {
            background-color: var(--neutral-300);
            padding: var(--space-6);
            border-radius: var(--radius-lg);
            margin: var(--space-8) 0;
            border-left: 4px solid var(--accent);
        }

        .source-papers h3 {
            color: var(--accent-dark);
            display: flex;
            align-items: center;
            gap: var(--space-2);
            margin-bottom: var(--space-4);
        }

        .source-papers h3 i {
            color: var(--accent);
        }

        .paper-link {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-3) var(--space-4);
            background-color: var(--neutral-100);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-3);
            transition: all var(--transition-normal);
            border-left: 3px solid var(--primary);
            text-decoration: none;
        }
        
        .paper-link:hover {
            background-color: var(--neutral-200);
            transform: translateX(5px);
        }

        .paper-link i {
            color: var(--primary);
            font-size: 1.25rem;
        }

        .paper-info {
            flex: 1;
        }

        .paper-title {
            font-weight: 600;
            color: var(--primary-dark);
            margin-bottom: var(--space-1);
        }

        .paper-authors {
            font-size: 0.875rem;
            color: var(--neutral-700);
        }

        .mt-4 {
            margin-top: var(--space-4);
        }

        /* Tooltip Styles */
        .tooltip-container {
            position: relative;
            display: inline-block;
        }

        .tooltip-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 18px;
            height: 18px;
            background-color: var(--primary-light);
            color: white;
            border-radius: 50%;
            font-size: 0.75rem;
            font-weight: bold;
            cursor: help;
            margin-left: var(--space-2);
            transition: all var(--transition-fast);
        }

        .tooltip-icon:hover {
            background-color: var(--primary);
            transform: scale(1.1);
        }

        .tooltip-content {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--neutral-900);
            color: white;
            padding: var(--space-3) var(--space-4);
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            line-height: 1.5;
            width: 280px;
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition-normal);
            z-index: 1000;
            margin-bottom: var(--space-2);
            box-shadow: var(--shadow-lg);
        }

        .tooltip-content::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: var(--neutral-900);
        }

        .tooltip-container:hover .tooltip-content {
            opacity: 1;
            visibility: visible;
        }

        .tooltip-content strong {
            color: var(--neutral-100);
        }

        .tooltip-content p {
            color: var(--neutral-100);
        }

        .tooltip-content ul {
            margin: var(--space-2) 0 0 0;
            padding-left: var(--space-4);
        }

        .tooltip-content li {
            margin-bottom: var(--space-1);
            color: var(--neutral-100);
        }

        /* Confidence Interval Styles */
        .confidence-note {
            background-color: var(--neutral-200);
            border-left: 3px solid var(--accent);
            padding: var(--space-3) var(--space-4);
            margin-top: var(--space-4);
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            color: var(--neutral-700);
        }

        .confidence-note i {
            color: var(--accent);
            margin-right: var(--space-2);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .container {
                padding: var(--space-3);
            }
            
            .hero {
                padding: var(--space-6) 0;
            }
            
            .hero h1 {
                font-size: 1.75rem;
            }
            
            .card-header, .card-body {
                padding: var(--space-4);
            }
            
            .chart-container {
                padding-bottom: 80%;
            }
            
            .currency-selector-container {
                justify-content: center;
                margin-top: var(--space-4);
            }
        }

        /* Contact Modal Styles */
        .contact-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            animation: fadeIn 0.3s ease-out;
        }

        .contact-modal-content {
            background-color: var(--neutral-100);
            margin: 15% auto;
            padding: var(--space-6);
            border-radius: var(--radius-lg);
            max-width: 500px;
            width: 90%;
            box-shadow: var(--shadow-xl);
            position: relative;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .contact-modal-close {
            position: absolute;
            top: var(--space-4);
            right: var(--space-4);
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--neutral-600);
            cursor: pointer;
            transition: color var(--transition-fast);
            line-height: 1;
        }

        .contact-modal-close:hover {
            color: var(--neutral-800);
        }

        .contact-modal h3 {
            color: var(--primary);
            margin-bottom: var(--space-4);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .contact-modal h3 i {
            color: var(--secondary);
        }

        .contact-modal p {
            margin-bottom: var(--space-3);
            color: var(--neutral-700);
            line-height: 1.6;
        }

        .contact-email {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            background-color: var(--primary);
            color: white;
            padding: var(--space-3) var(--space-4);
            border-radius: var(--radius-md);
            font-weight: 600;
            text-decoration: none;
            transition: all var(--transition-fast);
            margin-top: var(--space-2);
        }

        .contact-email:hover {
            background-color: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
            color: white;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }

        .fade-in-1 { animation-delay: 0.1s; }
        .fade-in-2 { animation-delay: 0.2s; }
        .fade-in-3 { animation-delay: 0.3s; }
        .fade-in-4 { animation-delay: 0.4s; }
    </style>
</head>

<body>
    <div class="page-wrapper">
        <!-- Hero Section -->
        <section class="hero">
            <button class="close-calculator" onclick="if(window.parent !== window) { window.parent.postMessage('closeModal', '*'); }">
                <i class="fas fa-times"></i>
            </button>
            <div class="hero-content">
                <div class="hero-badge">University of Melbourne Research</div>
                <h1>Hull Fouling Cost Calculator</h1>
                <p>Calculate the economic and environmental impact of hull fouling with precision, backed by advanced 3D underwater scanning research and academic studies.</p>
                <div class="hero-slideshow">
                    <div class="slide active">
                        <img src="assets/aquamarsOne.png" alt="AQUAMARS Underwater Scan 1" />
                    </div>
                    <div class="slide">
                        <img src="assets/aquamarsTwo.png" alt="AQUAMARS Underwater Scan 2" />
                    </div>
                    <div class="slideshow-dots">
                        <span class="dot active"></span>
                        <span class="dot"></span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Currency Selector -->
        <div class="currency-selector-container">
            <div class="currency-selector">
                <label for="currencySelect"><i class="fas fa-money-bill-wave"></i> Currency:</label>
                <select id="currencySelect">
                    <option value="AUD">AUD</option>
                    <option value="GBP">GBP</option>
                    <option value="USD">USD</option>
                </select>
            </div>
        </div>

        <main class="main-content">
            <div class="container">
                <!-- Introduction Card -->
                <div class="card fade-in fade-in-1">
                    <div class="card-header">
                        <h2 class="card-header-title">What This Calculator Does</h2>
                        <div class="card-header-icon">
                            <i class="fas fa-ship"></i>
                        </div>
                    </div>
                    <div class="card-body">
                        <p>This tool helps vessel operators estimate the economic and environmental impact of hull fouling based on actual research data from the University of Melbourne. It synthesizes findings from multiple studies, including measurements on the cruise ship and a tugboat.</p>
                        
                        <div class="information-note">
                            <h4><i class="fas fa-info-circle"></i> Research-Based Tool</h4>
                            <p>This calculator is built using direct measurements and validated outcomes from University of Melbourne studies using AQUAMARS (Advanced Quality Underwater Mapping and Analysis for Rough Surfaces) technology. The calculations represent real-world impacts measured through advanced 3D underwater scanning.</p>
                        </div>
                        
                        <p>Simply:</p>
                        <ol>
                            <li>Select your vessel type</li>
                            <li>Adjust operating costs if needed</li>
                            <li>Set the hull fouling severity</li>
                        </ol>
                        <p>The calculator will instantly show you:</p>
                        <ul>
                            <li>Additional fuel costs at different speeds</li>
                            <li>Percentage increase in operating expenses</li>
                            <li>Added CO₂ emissions from reduced efficiency</li>
                            <li>Estimated annual impact on your operations</li>
                        </ul>
                    </div>
                </div>

                <!-- Source Papers Section -->
                <div class="source-papers fade-in fade-in-2">
                    <h3><i class="fas fa-file-alt"></i> Source Research Papers</h3>
                    <p>This calculator is based on the following University of Melbourne research studies. To access these papers and understand the methodology, measurements, and findings in detail, please click on the papers below:</p>
                    
                    <a href="#" class="paper-link" onclick="showContactModal(); return false;">
                        <i class="fas fa-file-pdf"></i>
                        <div class="paper-info">
                            <div class="paper-title">Quantitative assessment of increased frictional drag due to hull fouling using underwater surface scanning - Coral Adventurer Study</div>
                            <div class="paper-authors">University of Melbourne for Franmarine Underwater Services (2025)</div>
                        </div>
                        <i class="fas fa-envelope"></i>
                    </a>
                    
                    <a href="#" class="paper-link" onclick="showContactModal(); return false;">
                        <i class="fas fa-file-pdf"></i>
                        <div class="paper-info">
                            <div class="paper-title">Quantitative assessment of increased frictional drag due to hull fouling using underwater surface scanning - Rio Tinto Tugboat Study</div>
                            <div class="paper-authors">Kevin, L. Tsigaras, A. Kogios, J. Monty - University of Melbourne (2024)</div>
                        </div>
                        <i class="fas fa-envelope"></i>
                    </a>
                    
                    <p class="mt-4">As more research studies become available, this calculator will continue to be updated with additional vessel types and more refined friction coefficients for different fouling conditions.</p>
                </div>

                <!-- Calculator Grid -->
                <div class="calculator-grid fade-in fade-in-3">
                    <!-- Controls Card -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-header-title">Vessel Parameters</h3>
                            <div class="card-header-icon">
                                <i class="fas fa-sliders-h"></i>
                            </div>
                        </div>
                        <div class="card-body">
                            <!-- Vessel Selection -->
                            <div class="form-group">
                                <label for="vesselType">Vessel Type</label>
                                <div class="input-wrapper">
                                    <select id="vesselType">
                                        <option value="tug">Harbor Tug (32m)</option>
                                        <option value="cruiseShip">Passenger Cruise Ship (93m)</option>
                                        <option value="custom">Custom Vessel</option>
                                    </select>
                                </div>
                                <span class="help-text">Select vessel to load parameters measured in UoM research</span>
                            </div>
                            
                            <!-- Custom Vessel Parameters (initially hidden) -->
                            <div id="customVesselParams" style="display: none;">
                                <div class="custom-vessel-section">
                                    <h4><i class="fas fa-ship"></i> Hull Dimensions</h4>
                                    
                                    <div class="form-group">
                                        <label for="customLength">Length Overall (m)</label>
                                        <div class="input-wrapper">
                                            <input type="number" id="customLength" 
                                                   min="10" max="400" step="0.1" value="50">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="customBeam">Beam (m)</label>
                                        <div class="input-wrapper">
                                            <input type="number" id="customBeam" 
                                                   min="3" max="70" step="0.1" value="10">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="customDraft">Draft (m)</label>
                                        <div class="input-wrapper">
                                            <input type="number" id="customDraft" 
                                                   min="1" max="30" step="0.1" value="4">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="customCb">
                                            Block Coefficient (Cb)
                                            <span class="tooltip-container">
                                                <span class="tooltip-icon">?</span>
                                                <div class="tooltip-content">
                                                    <strong>What is Block Coefficient?</strong>
                                                    <p>The block coefficient (Cb) indicates how "full" your hull shape is. It's the ratio of your vessel's underwater volume to a rectangular box with the same dimensions.</p>
                                                    <strong>How to estimate:</strong>
                                                    <ul>
                                                        <li><strong>0.40-0.55:</strong> Fast vessels (patrol boats, yachts)</li>
                                                        <li><strong>0.55-0.65:</strong> Medium-speed vessels (ferries, tugs)</li>
                                                        <li><strong>0.65-0.75:</strong> Cargo vessels (container ships)</li>
                                                        <li><strong>0.75-0.85:</strong> Slow, full vessels (tankers, bulk carriers)</li>
                                                    </ul>
                                                    <p>If unsure, use 0.65 for workboats or 0.75 for cargo vessels.</p>
                                                </div>
                                            </span>
                                        </label>
                                        <div class="input-wrapper">
                                            <input type="number" id="customCb" 
                                                   min="0.4" max="0.9" step="0.01" value="0.65">
                                        </div>
                                        <span class="help-text">0.4-0.55: Fine hull, 0.55-0.7: Medium, 0.7-0.9: Full</span>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="customDisplacement">Displacement (tonnes)</label>
                                        <div class="input-wrapper">
                                            <input type="number" id="customDisplacement" 
                                                   readonly>
                                        </div>
                                        <span class="help-text">Auto-calculated from dimensions</span>
                                    </div>
                                </div>
                                
                                <div class="custom-vessel-section">
                                    <h4><i class="fas fa-tachometer-alt"></i> Performance</h4>
                                    
                                    <div class="form-group">
                                        <label for="customEcoSpeed">Economic Speed (knots)</label>
                                        <div class="input-wrapper">
                                            <input type="number" id="customEcoSpeed" 
                                                   min="5" max="25" step="0.5" value="10">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="customFullSpeed">Maximum Speed (knots)</label>
                                        <div class="input-wrapper">
                                            <input type="number" id="customFullSpeed" 
                                                   min="8" max="35" step="0.5" value="15">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="vesselCategory">Vessel Category</label>
                                        <div class="input-wrapper">
                                            <select id="vesselCategory">
                                                <option value="cargo">Cargo/Tanker</option>
                                                <option value="container">Container Ship</option>
                                                <option value="cruise">Cruise/Passenger</option>
                                                <option value="naval">Naval/Coast Guard</option>
                                                <option value="workboat">Tug/Workboat</option>
                                                <option value="yacht">Yacht/Pleasure</option>
                                            </select>
                                        </div>
                                        <span class="help-text">Used to estimate engine efficiency</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Cost Inputs -->
                            <div class="form-group">
                                <label for="costEco">Operating Cost @ Economic Speed</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-dollar-sign input-icon"></i>
                                    <input type="number" id="costEco" class="input-with-icon" step="50" min="100">
                                </div>
                                <span class="help-text">Base fuel cost at economic speed ($/hr with clean hull)</span>
                            </div>
                            
                            <div class="form-group">
                                <label for="costFull">Operating Cost @ Full Speed</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-dollar-sign input-icon"></i>
                                    <input type="number" id="costFull" class="input-with-icon" step="50" min="500">
                                </div>
                                <span class="help-text">Base fuel cost at full speed ($/hr with clean hull)</span>
                            </div>
                            
                            <!-- Fouling Rating Slider -->
                            <div class="slider-container">
                                <div class="slider-header">
                                    <label for="frSlider">Hull Fouling Rating</label>
                                    <div id="frLabel" class="slider-value">FR2</div>
                                </div>
                                <input type="range" id="frSlider" class="range-slider" min="0" max="5" step="1" value="2">
                                <div class="range-ticks">
                                    <div class="range-tick" data-value="0">
                                        <div class="tick-dot"></div>
                                        <div class="tick-label">FR0</div>
                                    </div>
                                    <div class="range-tick" data-value="1">
                                        <div class="tick-dot"></div>
                                        <div class="tick-label">FR1</div>
                                    </div>
                                    <div class="range-tick" data-value="2">
                                        <div class="tick-dot"></div>
                                        <div class="tick-label">FR2</div>
                                    </div>
                                    <div class="range-tick" data-value="3">
                                        <div class="tick-dot"></div>
                                        <div class="tick-label">FR3</div>
                                    </div>
                                    <div class="range-tick" data-value="4">
                                        <div class="tick-dot"></div>
                                        <div class="tick-label">FR4</div>
                                    </div>
                                    <div class="range-tick" data-value="5">
                                        <div class="tick-dot"></div>
                                        <div class="tick-label">FR5</div>
                                    </div>
                                </div>
                                
                                <table class="fouling-rating-table">
                                    <thead>
                                        <tr>
                                            <th>Rating</th>
                                            <th>Description</th>
                                            <th>Roughness (ks)</th>
                                            <th>Friction Impact</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><strong>FR0</strong></td>
                                            <td>Clean hull</td>
                                            <td>0 μm</td>
                                            <td>Baseline</td>
                                        </tr>
                                        <tr>
                                            <td><strong>FR1</strong></td>
                                            <td>Light slime</td>
                                            <td>30 μm</td>
                                            <td>+15%</td>
                                        </tr>
                                        <tr>
                                            <td><strong>FR2</strong></td>
                                            <td>Medium slime</td>
                                            <td>100 μm</td>
                                            <td>+35%</td>
                                        </tr>
                                        <tr>
                                            <td><strong>FR3</strong></td>
                                            <td>Heavy slime</td>
                                            <td>300 μm</td>
                                            <td>+60%</td>
                                        </tr>
                                        <tr>
                                            <td><strong>FR4</strong></td>
                                            <td>Light calcareous</td>
                                            <td>800 μm</td>
                                            <td>+95%</td>
                                        </tr>
                                        <tr>
                                            <td><strong>FR5</strong></td>
                                            <td>Heavy calcareous</td>
                                            <td>2000 μm</td>
                                            <td>+193%*</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <p class="help-text" style="margin-top: 8px;">
                                    * FR5 impact directly measured in University of Melbourne Cruise Ship study<br>
                                    Note: Actual cost impact varies with speed due to friction/wave resistance ratio
                                </p>
                            </div>
                            
                            <!-- Results Section -->
                            <div class="results-section">
                                <h3><i class="fas fa-chart-line"></i> Cost Impact Analysis</h3>
                                <div id="resultsText"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Chart Card -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-header-title">Cost & Emissions vs. Speed</h3>
                            <div class="card-header-icon">
                                <i class="fas fa-chart-area"></i>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <div class="chart-wrapper">
                                    <canvas id="myChart"></canvas>
                                </div>
                            </div>
                            <p>This chart shows how operating costs and emissions increase with speed for both clean and fouled hulls. The difference between the two cost lines represents your potential savings from hull maintenance.</p>
                            
                            <div class="confidence-note">
                                <i class="fas fa-chart-line"></i>
                                <strong>Confidence Intervals:</strong> The fouling impacts shown represent mean values from research studies. Actual impacts can vary by ±15-20% depending on fouling type, distribution, and environmental conditions. FR5 impacts are directly validated from University of Melbourne measurements, while intermediate values are interpolated using established fluid dynamics models.
                            </div>
                            
                            <div class="information-note">
                                <h4><i class="fas fa-lightbulb"></i> Understanding The Model</h4>
                                <p>The calculator uses a physics-based model that accounts for both frictional resistance (affected by fouling) and wave-making resistance (primarily affected by speed). The fouling impact values at FR4 (2.8mm roughness) are directly measured from University of Melbourne research, with intermediate values derived from fluid dynamics modeling.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Research Section -->
                <div class="research-section fade-in fade-in-4">
                    <div class="research-header">
                        <h2>Research Foundation</h2>
                        <p>This calculator integrates findings from University of Melbourne marine engineering research, using advanced physics-based models to calculate drag and resistance.</p>
                    </div>
                    
                    <div class="research-highlight">
                        <h3>Key Findings</h3>
                        <ul>
                            <li>Heavy calcareous fouling increased friction coefficient by up to 193%</li>
                            <li>For a medium-sized cruise ship, this translates to approximately $3M in additional annual fuel costs</li>
                            <li>CO₂ emissions increase proportionally with fuel consumption</li>
                            <li>The physics model accounts for both skin friction and wave-making resistance</li>
                        </ul>
                    </div>
                    
                    <div class="information-note">
                        <h4><i class="fas fa-info-circle"></i> Ongoing Research</h4>
                        <p>This calculator will be updated as more University of Melbourne studies become available. Future enhancements will include additional vessel types, more refined friction coefficients for different fouling conditions, and the ability to calculate acoustic impacts of hull fouling.</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Contact Modal -->
    <div id="contactModal" class="contact-modal">
        <div class="contact-modal-content">
            <span class="contact-modal-close" onclick="closeContactModal()">&times;</span>
            <h3><i class="fas fa-info-circle"></i> Access Research Papers</h3>
            <p>To access the full research papers and detailed findings from the University of Melbourne studies, please contact:</p>
            <a href="mailto:kevin.kevin@unimelb.edu.au" class="contact-email">
                <i class="fas fa-envelope"></i>
                kevin.kevin@unimelb.edu.au
            </a>
        </div>
    </div>

    <!-- Load the calculator script -->
    <script src="./hullCalc.js"></script>
    
    <script>
        // Contact modal functions
        function showContactModal() {
            document.getElementById('contactModal').style.display = 'block';
        }
        
        function closeContactModal() {
            document.getElementById('contactModal').style.display = 'none';
        }
        
        // Close modal when clicking outside of it
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('contactModal');
            if (event.target === modal) {
                closeContactModal();
            }
        });
        
        // Initialize the calculator when the page loads
        window.addEventListener('load', function() {
            console.log('Hull calculator window loaded, initializing...');
            
            // Check if Chart.js is loaded
            if (typeof Chart === 'undefined') {
                console.error('Chart.js is not loaded!');
                return;
            }
            
            // Initialize the calculator after a short delay to ensure DOM is ready
            setTimeout(() => {
                if (typeof initHullFoulingCalculator === 'function') {
                    console.log('Calling initHullFoulingCalculator...');
                    initHullFoulingCalculator();
                } else {
                    console.error('initHullFoulingCalculator function not found');
                }
            }, 100);
        });
        
        // Also listen for messages from parent
        window.addEventListener('message', function(event) {
            if (event.data === 'showModal') {
                console.log('Received showModal message');
                if (!window.calculatorInitialized && typeof initHullFoulingCalculator === 'function') {
                    initHullFoulingCalculator();
                }
            }
        });

        // Slideshow logic for hero section
        (function() {
            const slides = document.querySelectorAll('.hero-slideshow .slide');
            const dots = document.querySelectorAll('.hero-slideshow .dot');
            let current = 0;
            function showSlide(idx) {
                slides.forEach((slide, i) => {
                    slide.classList.toggle('active', i === idx);
                    dots[i].classList.toggle('active', i === idx);
                });
                current = idx;
            }
            function nextSlide() {
                showSlide((current + 1) % slides.length);
            }
            dots.forEach((dot, i) => {
                dot.addEventListener('click', () => showSlide(i));
            });
            setInterval(nextSlide, 4000);
        })();
    </script>
</body>
</html>